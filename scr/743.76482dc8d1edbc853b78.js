"use strict";(self.webpackChunkvintage_machine=self.webpackChunkvintage_machine||[]).push([[743],{1039:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".vVgLniZGJcn5HHLg4g_e {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  background: #007;\n  overflow: hidden;\n  display: grid;\n  place-items: center;\n  padding: 0;\n}\n\n.vVgLniZGJcn5HHLg4g_e > canvas {\n  border: none;\n  box-shadow: none;\n  background: transparent;\n  height: 100%;\n}\n",""]),i.locals={panelMonitor:"vVgLniZGJcn5HHLg4g_e"};const a=i},1057:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".CL1VFo0EzgJYCRpYRaZ8 {\n}\n",""]),i.locals={editor:"CL1VFo0EzgJYCRpYRaZ8"};const a=i},1212:(e,t,n)=>{e.exports=n.p+"fnt/bangers.f0f1f39c39ee2df57fd7.ttf"},1240:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".uOeVlr9ph9XwxMH2Dewg {\n  --custom-ratio1: 1fr;\n  --custom-ratio2: 1fr;\n  display: grid;\n  grid-template-rows: var(--custom-ratio1) var(--custom-ratio2);\n  width: 100%;\n  height: 100%;\n}\n\n.uOeVlr9ph9XwxMH2Dewg > div.F9U5vPJTaCaM37DfvcLt {\n  position: relative;\n  min-height: 0;\n}\n",""]),i.locals={splitVertical:"uOeVlr9ph9XwxMH2Dewg",container:"F9U5vPJTaCaM37DfvcLt"};const a=i},1343:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".UdUM3C1SFkVhXUrt9EQT {\n}\n",""]),i.locals={workBench:"UdUM3C1SFkVhXUrt9EQT"};const a=i},1945:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".inouPEQJqnUd6bbpZ3yg {\n}\n",""]),i.locals={menu:"inouPEQJqnUd6bbpZ3yg"};const a=i},3453:(e,t,n)=>{n.d(t,{A:()=>d});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o),a=n(4417),l=n.n(a),c=new URL(n(1212),n.b),u=i()(s()),h=l()(c);u.push([e.id,`/* vietnamese */\n@font-face {\n  font-family: bangers;\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${h}) format("woff2");\n  unicode-range:\n    U+0102-0103, U+0110-0111, U+0128-0129, U+0168-0169, U+01A0-01A1,\n    U+01AF-01B0, U+0300-0301, U+0303-0304, U+0308-0309, U+0323, U+0329,\n    U+1EA0-1EF9, U+20AB;\n}\n/* latin-ext */\n@font-face {\n  font-family: bangers;\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${h}) format("woff2");\n  unicode-range:\n    U+0100-02BA, U+02BD-02C5, U+02C7-02CC, U+02CE-02D7, U+02DD-02FF, U+0304,\n    U+0308, U+0329, U+1D00-1DBF, U+1E00-1E9F, U+1EF2-1EFF, U+2020, U+20A0-20AB,\n    U+20AD-20C0, U+2113, U+2C60-2C7F, U+A720-A7FF;\n}\n/* latin */\n@font-face {\n  font-family: bangers;\n  font-style: normal;\n  font-weight: 400;\n  font-display: swap;\n  src: url(${h}) format("woff2");\n  unicode-range:\n    U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6, U+02DA, U+02DC,\n    U+0304, U+0308, U+0329, U+2000-206F, U+20AC, U+2122, U+2191, U+2193, U+2212,\n    U+2215, U+FEFF, U+FFFD;\n}\n`,""]);const d=u},6717:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".bYFbQ007eyAlPkKJJ640 blockquote {\n  font-family: bangers;\n  color: var(--theme-color-on-neutral-9-7);\n  background: var(--theme-color-neutral-9);\n  border-radius: 2em;\n  padding: 0.5em 1em;\n  box-shadow: 0 0 0.25em #000;\n  letter-spacing: 0.1em;\n  line-height: 1.4;\n}\n\n.bYFbQ007eyAlPkKJJ640 blockquote > p {\n  margin: 0;\n}\n\ndiv.sju8Tw3U10wXcjzW6uyM {\n  cursor: pointer;\n}\n\ndiv.sju8Tw3U10wXcjzW6uyM pre {\n  white-space: pre-wrap;\n  background: transparent;\n  color: #fff;\n}\n",""]),i.locals={panelManual:"bYFbQ007eyAlPkKJJ640",error:"sju8Tw3U10wXcjzW6uyM"};const a=i},6865:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".oPcl6WEWmddsJUpEd2uV {\n  color: #fff;\n  background: #333;\n}\n",""]),i.locals={panelEditor:"oPcl6WEWmddsJUpEd2uV"};const a=i},8743:(e,t,n)=>{n.r(t),n.d(t,{default:()=>rt});var r=n(4848),s=n(5968),o=n(5072),i=n.n(o),a=n(7825),l=n.n(a),c=n(7659),u=n.n(c),h=n(5056),d=n.n(h),p=n(540),f=n.n(p),g=n(1113),m=n.n(g),v=n(1343),y={};y.styleTagTransform=m(),y.setAttributes=d(),y.insert=u().bind(null,"head"),y.domAPI=l(),y.insertStyleElement=f(),i()(v.A,y);const b=v.A&&v.A.locals?v.A.locals:void 0;var x=n(9384),A={};A.styleTagTransform=m(),A.setAttributes=d(),A.insert=u().bind(null,"head"),A.domAPI=l(),A.insertStyleElement=f(),i()(x.A,A);const E=x.A&&x.A.locals?x.A.locals:void 0,w=s.Sxu.classNames;function C({className:e,children:[t,n]}){return(0,r.jsxs)("div",{className:w.join(e,E.splitHorizontal),children:[(0,r.jsx)("div",{className:E.container,children:t}),(0,r.jsx)("div",{className:E.container,children:n})]})}var I=n(1240),S={};S.styleTagTransform=m(),S.setAttributes=d(),S.insert=u().bind(null,"head"),S.domAPI=l(),S.insertStyleElement=f(),i()(I.A,S);const F=I.A&&I.A.locals?I.A.locals:void 0,T=s.Sxu.classNames;function _({className:e,children:[t,n]}){return(0,r.jsxs)("div",{className:T.join(e,F.splitVertical),children:[(0,r.jsx)("div",{className:F.container,children:t}),(0,r.jsx)("div",{className:F.container,children:n})]})}var R=n(6865),k={};k.styleTagTransform=m(),k.setAttributes=d(),k.insert=u().bind(null,"head"),k.domAPI=l(),k.insertStyleElement=f(),i()(R.A,k);const N=R.A&&R.A.locals?R.A.locals:void 0;var U=n(1945),P={};P.styleTagTransform=m(),P.setAttributes=d(),P.insert=u().bind(null,"head"),P.domAPI=l(),P.insertStyleElement=f(),i()(U.A,P);const O=U.A&&U.A.locals?U.A.locals:void 0;var L=n(4865);class ${constructor(e,t){this.gl=e,this.screenWidthInverse=2/t.screenWidth,this.screenHeightInverse=2/t.screenHeight,this.texture=t.symbols;const n=new L.a6X(e,{vert:"// attPosition.x is +1 or -1\n// attPosition.y is +1 or -1\nattribute vec2 attPos;\n// UV coordinates are either 0 or 1.\nattribute vec2 attUV;\n\n// Double of the inverse of screen width/height in pixels.\nuniform vec2 uniScreenSizeInverse;\n// Screen coordinates of the center, in pixels.\n// The center of the screen is at (0,0).\nuniform vec2 uniCenter;\n// Size of the symbol in pixels divided by 256;\nuniform vec2 uniSymbolSize;\n// Position of the top left corner of the symbol,\n// expressed in pixels divided by 256.\nuniform vec2 uniSymbolCorner;\n// Scale of a symbol.\nuniform float uniScale;\n\nvarying vec2 varUV;\n\nvoid main() {\n    vec2 center = uniCenter * uniScreenSizeInverse;\n    vec2 point = 128.0 * uniSymbolSize * attPos;   // Later, we will add rotation and scale.\n    gl_Position = vec4(center + point * uniScale * uniScreenSizeInverse, 0.0, 1.0);\n    varUV = uniSymbolCorner + uniSymbolSize * attUV;\n}\n",frag:"precision mediump float;\n\n// The symbols' page.\nuniform sampler2D texSymbols;\nuniform float uniColor;\n\n// Coords of the current pixel. (0,0) is le left bottom one and (1,1) is the upper right one.\nvarying vec2 varUV;\n\nvoid main() {\n  float alpha = texture2D( texSymbols, varUV ).a;\n  if (alpha < 0.5) discard;\n  \n  gl_FragColor = vec4( vec3(uniColor), 1.0);\n//   if (varUV.x < 32.0 / 256.0) {\n//     gl_FragColor = vec4(0, 1, 0, 1);\n//   } else {\n//     gl_FragColor = vec4(1, 0, 0, 1);\n//   }\n}\n"});this.prg=n;const r=new L.I9j({attPos:"vec2",attUV:"vec2"});r.set("attPos",new Float32Array([-1,1,-1,-1,1,1,1,-1])),r.set("attUV",new Float32Array([0,1,0,0,1,1,1,0]));const s=new L.ZV_(e,n,[r]);this.vao=s}delete(){this.texture.delete(),this.prg.delete(),this.vao.delete()}paint({screenX:e,screenY:t,symbolX:n,symbolY:r,width:s=16,height:o=16,colorIndex:i,scale:a=1}){const{gl:l,prg:c,vao:u,texture:h,screenWidthInverse:d,screenHeightInverse:p}=this;c.use(),h.activate(0,c,"texSymbols"),c.uniform1f("uniScale",a),c.uniform1f("uniColor",i/255),c.uniform2f("uniScreenSizeInverse",d,p),c.uniform2f("uniCenter",e,t),c.uniform2f("uniSymbolCorner",n/256,r/256),c.uniform2f("uniSymbolSize",s/256,o/256),u.bind(),l.drawArrays(l.TRIANGLE_STRIP,0,4),u.unbind()}}class j extends L.tbm{constructor(e,t,n){super(),this.context=e,this.textureRead=t,this.action=n;const r=new L.dLJ({varying:{varUV:"vec2"},attributes:{attPos:"vec2",attUV:"vec2"},mainCode:["varUV = attUV;","gl_Position = vec4(attPos, 0.0, 1.0);"]}).code,s=new L.NI6({varying:{varUV:"vec2"},uniforms:{uniTexture:"sampler2D"},outputs:{FragColor:"vec4"},mainCode:["float colorIndex = texture(uniTexture, varUV).r;","FragColor = vec4(colorIndex, 0.0, 0.0, 1.0);"]}).code,o=new L.a6X(e.gl,{vert:r,frag:s});this.prg=o;const i=new L.I9j({attPos:"vec2",attUV:"vec2"});i.set("attPos",new Float32Array([-1,1,-1,-1,1,1,1,-1])),i.set("attUV",new Float32Array([0,1,0,0,1,1,1,0]));const a=new L.ZV_(e.gl,o,[i]);this.vao=a}delete(){this.prg.delete(),this.vao.delete()}paint(){const{context:e,prg:t,vao:n,textureRead:r}=this,{gl:s}=e;t.use(),r.activate(0,t,"uniTexture"),n.bind(),s.drawArrays(s.TRIANGLE_STRIP,0,4),n.unbind(),this.action()}}class M extends L.tbm{constructor(e,t,n,r){super(),this.surface=new j(e,t,r),this.framebuffer=new L.K7(e,{textureColor0:n,children:[this.surface]})}delete(){this.surface.delete(),this.framebuffer.delete()}paint(e,t){this.framebuffer.paint(e,t)}}class V{constructor(e){this.context=e,this.action=H,this.currentFramebufferIndex=0,this.applyAction=()=>{this.action()};const t=new L.HTX(e),n=new L.HTX(e);this.textures=[t,n];for(const e of this.textures)e.setParams({magFilter:"NEAREST",minFilter:"NEAREST",wrapS:"REPEAT",wrapT:"REPEAT"});const r=this.applyAction;this.framebuffers=[new M(e,n,t,r),new M(e,t,n,r)]}get texture(){return this.textures[this.currentFramebufferIndex]}swap(){this.currentFramebufferIndex=1-this.currentFramebufferIndex}delete(){for(const e of this.textures)e.delete();for(const e of this.framebuffers)e.delete()}paint(e=H){this.swap(),this.action=e,this.framebuffers[this.currentFramebufferIndex].paint(0,0)}}const H=()=>{};class B{constructor(e,t){this.context=e,this.texturePalette=t;const n=new L.dLJ({varying:{varUV:"vec2"},attributes:{attPos:"vec2",attUV:"vec2"},mainCode:["varUV = attUV;","gl_Position = vec4(attPos, 0.0, 1.0);"]}).code,r=new L.NI6({varying:{varUV:"vec2"},uniforms:{uniTexture:"sampler2D",uniPalette:"sampler2D"},outputs:{FragColor:"vec4"},mainCode:["vec4 texel = texture(uniTexture, varUV);","float colorIndex = texel.r;","float u = colorIndex + 1.0 / 512.0;","FragColor = texture(uniPalette, vec2(u, 0.5));","if (colorIndex == 0.0) FragColor.a = 0.0;"]}).code,s=new L.a6X(e.gl,{vert:n,frag:r});this.prg=s;const o=new L.I9j({attPos:"vec2",attUV:"vec2"});o.set("attPos",new Float32Array([-1,1,-1,-1,1,1,1,-1])),o.set("attUV",new Float32Array([0,0,0,1,1,0,1,1]));const i=new L.ZV_(e.gl,s,[o]);this.vao=i}delete(){this.prg.delete(),this.vao.delete()}paint(e){const{context:t,prg:n,vao:r,texturePalette:s}=this,{gl:o}=t;n.use(),e.activate(0,n,"uniTexture"),s.activate(1,n,"uniPalette"),r.bind(),o.drawArrays(o.TRIANGLE_STRIP,0,4),r.unbind()}}var X=n(2197);function D(e,t,n){return r=>{try{return null==t||t(r),n(r)}catch(t){throw new Error(`Erreur de l'instruction "${e.toUpperCase()}": ${t}`)}}}function J(e=1,t=999){return n=>{if((n.length<e||n.length>t)&&e===t){if(0===e)throw new Error("Cette function n'attend aucun argument.");if(1===e)throw new Error("Cette function attend un et un seul argument.");throw new Error(`Cette function attend entre ${e} et ${t} arguments.`)}for(const e of n)if("number"!=typeof e)throw new Error("Tous les arguments de cette fonction doivent être des nombres.")}}function G(e=1,t=999){return n=>{if((n.length<e||n.length>t)&&e===t){if(0===e)throw new Error("Cette function n'attend aucun argument.");if(1===e)throw new Error("Cette function attend un et un seul argument.");throw new Error(`Cette function attend entre ${e} et ${t} arguments.`)}for(const e of n)if("string"!=typeof e)throw new Error("Tous les arguments de cette fonction doivent être des nombres.")}}function Z(e=0,t=999){return n=>{if((n.length<e||n.length>t)&&e===t){if(0===e)throw new Error("Cette function n'attend aucun argument.");if(1===e)throw new Error("Cette function attend un et un seul argument.");throw new Error(`Cette function attend entre ${e} et ${t} arguments.`)}}}const K=e=>D("cls",J(0,1),(([t])=>{e.paintFB((()=>{if((0,X.Et)(t))return void e.painterRect.paint(0,0,1,1,(0,L.P_T)(Math.round(t),0,255));e.x=e.TEXT_ORIGIN_X,e.y=e.TEXT_ORIGIN_Y;const{gl:n}=e;n.clearColor(0,0,0,1),n.clear(n.COLOR_BUFFER_BIT)})),e.paint()})),W=e=>D("color",J(1,1),(([t])=>{e.colorIndex=t})),z=e=>D("disk",J(1,2),(([t,n])=>{e.paintFB((()=>{e.painterDisk.paint(e.screenSpaceX(e.x),e.screenSpaceY(e.y),e.screenSpaceX(t),e.screenSpaceY(null!=n?n:t),e.colorIndex)}))})),Y=e=>D("label",Z(1,2),(([t,n=1])=>{if(!(0,X.Et)(n))throw new Error("Si tu spécifie un deuxième argument pour LABEL(), il faut que ce soit un nombre.");const{x:r,y:s}=e,o=(0,X.Kg)(t)?t:JSON.stringify(t);let i=e.x-n*(o.length/2)*e.CHAR_SIZE;const a=e.y-n*e.CHAR_SIZE/2;for(const t of o.split(""))e.x=i,e.y=a,e.print(t,n),i+=e.CHAR_SIZE*n;e.x=r,e.y=s})),q=e=>D("locate",J(2,2),(([t,n])=>{const r=(0,L.P_T)(Math.floor(t),0,e.TEXT_COLS-1),s=(0,L.P_T)(Math.floor(n),0,e.TEXT_ROWS-1);e.x=e.TEXT_ORIGIN_X+r*e.CHAR_SIZE,e.y=e.TEXT_ORIGIN_Y+s*e.CHAR_SIZE})),Q=e=>D("move",J(2,2),(([t,n])=>{e.x=t,e.y=n})),ee=e=>D("pause",J(0,1),(([t])=>new Promise((n=>{(0,X.Et)(t)?(e.paint(),globalThis.setTimeout((()=>{console.log("Slept",t,"seconds."),n()}),1e3*t)):globalThis.requestAnimationFrame((()=>{e.paint(),n()}))}))));function te(e,t){const n=t.map((e=>(0,X.Kg)(e)?e:JSON.stringify(e))).join("");e.print(n)}const ne=e=>D("print",Z(),(t=>{te(e,t)})),re=e=>D("println",Z(),(t=>{te(e,t),e.x=e.TEXT_ORIGIN_X,e.y+=e.CHAR_SIZE})),se=e=>D("rect",J(1,2),(([t,n])=>{e.paintFB((()=>{e.painterRect.paint(e.screenSpaceX(e.x),e.screenSpaceY(e.y),e.screenSpaceX(t),e.screenSpaceY(null!=n?n:t),e.colorIndex)}))}));function oe(e,t,n){return r=>{try{return null==t||t(r),n(r)}catch(t){throw new Error(`Erreur de la fonction "${e.toUpperCase()}": ${t}`)}}}const ie=e=>oe("ASK",Z(0),(t=>new Promise((n=>{const r=t.map((e=>(0,X.Kg)(e)?e:JSON.stringify(e))).join("");e.print(r),e.paint();let s="";const o=t=>{if(!(t.ctrlKey||t.altKey||t.metaKey))try{const{key:r}=t;if(1===r.length)return s+=r,void e.print(r);if("Enter"===r)return globalThis.document.removeEventListener("keydown",o),e.x=e.TEXT_ORIGIN_X,e.y+=e.CHAR_SIZE,void n(s);console.log("🚀 [input] key =",r)}finally{e.paint()}};globalThis.document.addEventListener("keydown",o)}))));class ae{constructor(e){this.context=e,this.STEPS=128;const t=new L.dLJ({uniforms:{uniCenter:"vec2",uniRadius:"vec2"},attributes:{attPos:"vec2"},mainCode:["gl_Position = vec4(uniCenter + attPos * uniRadius, 0.0, 1.0);"]}).code,n=new L.NI6({uniforms:{uniColor:"float"},outputs:{FragColor:"vec4"},mainCode:["FragColor = vec4(uniColor, 0.0, 0.0, 1.0);"]}).code,r=new L.a6X(e.gl,{vert:t,frag:n});this.prg=r;const s=[0,0],o=2*Math.PI/this.STEPS;for(let e=0;e<this.STEPS;e++){const t=o*e,n=Math.cos(t),r=Math.sin(t);s.push(n,r)}s.push(1,0);const i=new L.I9j({attPos:"vec2"});i.set("attPos",new Float32Array(s));const a=new L.ZV_(e.gl,r,[i]);this.vao=a}delete(){this.prg.delete(),this.vao.delete()}paint(e,t,n,r,s){const{context:o,prg:i,vao:a}=this,{gl:l}=o;i.use(),i.uniform2f("uniCenter",e,t),i.uniform2f("uniRadius",n,r),i.uniform1f("uniColor",s/255),a.bind(),l.drawArrays(l.TRIANGLE_FAN,0,this.STEPS+2),a.unbind()}}class le{constructor(e){this.context=e;const t=new L.dLJ({uniforms:{uniCenter:"vec2",uniRadius:"vec2"},attributes:{attPos:"vec2"},mainCode:["gl_Position = vec4(uniCenter + attPos * uniRadius, 0.0, 1.0);"]}).code,n=new L.NI6({uniforms:{uniColor:"float"},outputs:{FragColor:"vec4"},mainCode:["FragColor = vec4(uniColor, 0.0, 0.0, 1.0);"]}).code,r=new L.a6X(e.gl,{vert:t,frag:n});this.prg=r;const s=new L.I9j({attPos:"vec2"});s.set("attPos",new Float32Array([-1,1,-1,-1,1,1,1,-1]));const o=new L.ZV_(e.gl,r,[s]);this.vao=o}delete(){this.prg.delete(),this.vao.delete()}paint(e,t,n,r,s){const{context:o,prg:i,vao:a}=this,{gl:l}=o;i.use(),i.uniform2f("uniCenter",e,t),i.uniform2f("uniRadius",n,r),i.uniform1f("uniColor",s/255),a.bind(),l.drawArrays(l.TRIANGLE_STRIP,0,4),a.unbind()}}const ce=()=>{};class ue extends L.tbm{constructor(e,t){super(),this.id="Kernel#"+ue.ID++,this.LAYERS_COUNT=1,this.WIDTH=640,this.HEIGHT=480,this.CHAR_SIZE=16,this.TEXT_COLS=Math.floor(this.WIDTH/this.CHAR_SIZE),this.TEXT_ROWS=Math.floor(this.HEIGHT/this.CHAR_SIZE),this.TEXT_ORIGIN_X=(this.CHAR_SIZE-this.WIDTH)/2,this.TEXT_ORIGIN_Y=(this.CHAR_SIZE-this.HEIGHT)/2,this.x=(this.CHAR_SIZE-this.WIDTH)/2,this.y=(this.CHAR_SIZE-this.HEIGHT)/2,this.colorIndex=24,this.variables=new Map,this.layers=[],this.canvasPalette=(0,L.rY8)(["#000000","#000080","#0000FF","#800000","#800080","#8000FF","#FF0000","#FF0080","#FF00FF","#008000","#008080","#0080FF","#808000","#808080","#8080FF","#FF8000","#FF8080","#FF80FF","#00FF00","#00FF80","#00FFFF","#80FF00","#80FF80","#80FFFF","#FFFF00","#FFFF80","#FFFFFF","#000000"],256,1),this._currentLayerindex=0,e.width=this.WIDTH,e.height=this.HEIGHT;const n=new L.tfp(e,{alpha:!0,antialias:!1,preserveDrawingBuffer:!0,onResize(e,t,n){}});this.context=n,this.painterDisk=new ae(n),this.painterRect=new le(n),this.texturePalette=new L.HTX(n).loadBitmap(this.canvasPalette),this.colorizer=new B(n,this.texturePalette),this.textureSymbols=new L.HTX(n).setParams({magFilter:"LINEAR",minFilter:"LINEAR",wrapS:"MIRRORED_REPEAT",wrapT:"MIRRORED_REPEAT"}).loadBitmap(t);for(let e=0;e<this.LAYERS_COUNT;e++)this.layers.push(new V(n));var r;n.add(this),n.paint(),this.painterSymbols=new $(n.gl,{symbols:this.textureSymbols,screenWidth:this.WIDTH,screenHeight:this.HEIGHT}),this.instructions={CLS:K(r=this),COLOR:W(r),DISK:z(r),LABEL:Y(r),LOCATE:q(r),MOVE:Q(r),PAUSE:ee(r),PRINT:ne(r),PRINTLN:re(r),RECT:se(r)},this.functions=(e=>({ABS:oe("ABS",J(1,1),(([e])=>Math.abs(e))),ASK:ie(e),CHR:oe("CHR",J(1),(e=>e.map((e=>String.fromCharCode(e))).join(""))),INT:oe("INT",G(1,1),(([e])=>Math.round(Number(e)))),LIST:oe("LIST",(e=>{const[t]=e;if(2!==e.length||"number"!=typeof t)throw new Error("Cette fonction attends deux arguments: le nombre d'éléments et la valeur initiale de ces éléments.")}),(([e,t])=>new Array(e).fill(t))),MIN:oe("MIN",J(1),(([e,...t])=>t.reduce(((e,t)=>Math.min(e,t)),e))),MAX:oe("MAX",J(1),(([e,...t])=>t.reduce(((e,t)=>Math.max(e,t)),e))),NOT:oe("NOT",J(1,1),(([e])=>0===e?1:0)),RANDOM:oe("RANDOM",J(1,2),(e=>{const[t,n]=e;return(0,X.Et)(n)?t===n?t:Math.min(t,n)+Math.floor(Math.random()*(Math.abs(n-t)+1)):Math.floor(Math.random()*t)})),RANGE:oe("RANGE",J(1,3),(e=>{let[t,n,r]=e;(0,X.Et)(n)||(n=t,t=0),(0,X.Et)(r)||(r=1);const s=[];for(let e=t;n>0;n--)s.push(e),e+=r;return s})),RGB:oe("RGB",J(3,3),(e=>{const[t,n,r]=e;return 256*(0,L.P_T)(Math.round(t),0,15)+16*(0,L.P_T)(Math.round(n),0,15)+(0,L.P_T)(Math.round(r),0,15)})),TIME:oe("TIME",J(0,0),(()=>Date.now()))}))(this)}get gl(){return this.context.gl}screenSpaceX(e){return 2*e/this.WIDTH}screenSpaceY(e){return 2*e/this.HEIGHT}executeInstruction(e,t){try{const n=this.instructions[e];if(!n)throw new Error(`L'instruction "${e.toUpperCase()}" n'existe pas.\nLes instructions disponibles sont: ${Object.keys(this.instructions).sort().join(", ")}.`);return n(t)}catch(t){const n=t instanceof Error?t.message:JSON.stringify(t);throw new Error(`Erreur de l'instruction ${e.toUpperCase()} :\n${n}`)}}executeFunction(e,t){try{const n=this.functions[e];if(!n)throw new Error(`La fonction "${e.toUpperCase()}" n'existe pas.\nLes fonctions disponibles sont: ${Object.keys(this.functions).sort().join(", ")}.`);return n(t)}catch(t){const n=t instanceof Error?t.message:JSON.stringify(t);throw new Error(`Erreur de la fonction ${e.toUpperCase()} :\n${n}`)}}get currentLayerIndex(){return this._currentLayerindex}set currentLayerIndex(e){e=1===this.LAYERS_COUNT?0:(0,L.P_T)(Math.round(e),0,this.LAYERS_COUNT-1),this._currentLayerindex=e}get layer(){return this.layers[this.currentLayerIndex]}delete(){for(const e of this.layers)e.delete();this.painterDisk.delete(),this.painterSymbols.delete(),this.textureSymbols.delete()}paint(){try{const{context:e,colorizer:t}=this,{gl:n}=e;console.log("PAINT"),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT);for(const e of this.layers)t.paint(e.texture)}catch(e){console.error("Error while painting:",e)}}paintFB(e=ce){this.layer.paint(e)}print(e,t=1){this.paintFB((()=>{for(const n of e.split("")){const e=255&n.charCodeAt(0),r=15&e,s=e-r>>4;this.painterSymbols.paint({screenX:this.x,screenY:this.y,symbolX:r*this.CHAR_SIZE,symbolY:s*this.CHAR_SIZE,colorIndex:this.colorIndex,scale:t}),this.x+=this.CHAR_SIZE*t,this.x>=this.WIDTH/2&&(this.x=this.TEXT_ORIGIN_X,this.y+=this.CHAR_SIZE*t)}}))}getVar(e){var t;if(e=e.toUpperCase(),!this.variables.has(e)){const t=[`La variable $${e.toLocaleLowerCase()} n'existe pas.`],n=Array.from(this.variables.keys()).map((e=>`$${e.toLocaleLowerCase()}`));throw 0===n.length?t.push("Aucune variable n'a encore été créée."):1===n.length?t.push(`La seule variable existante maintenant est ${n[0]}.`):t.push(`Les variables disponibles sont : ${n.join("\n")}`),new Error(t.join("\n"))}return null!==(t=this.variables.get(e))&&void 0!==t?t:0}setVar(e,t){this.variables.set(e.toUpperCase(),t)}debugVariables(){for(const e of this.variables.keys())console.log(e,"=",this.getVar(e))}test(){this.paintFB((()=>{this.painterSymbols.paint({colorIndex:4,screenX:0,screenY:0,symbolX:0,symbolY:0,width:512,height:512})}))}}ue.ID=0;var he=n(2772),de=n(8347);const pe={error:new de.A(null),ready:new de.A(!1),running:new de.A(!1),code:new de.A(["REM Ceci est un commentaire",'PRINT("Bonjour le monde !")'].join("\n"),{storage:{id:"TLK-74/Basik/current",guard:X.Kg}}),manualPageId:new de.A("index",{storage:{id:"TLK-74/Manual/current",guard:X.Kg}})},fe={SPC:/^[ \t]+/g,COM:/^(REM )[^\n\r]*[\n\r]+/gi,EOL:/^[\n\r]+/g,VAR:/^\$[a-z0-9\._]+/gi,HEX:/^#[0-9a-f]+/gi,NUM:/^-?([0-9]+(\.[0-9]+)?|\.[0-9]+)/g,STR:/^"(\\"|[^"])*"/g,BINOP:/^(and|or|xor|>=|<=|<>|\^|==|[%+*/<>-])/g,EQUAL:/^=/g,PAR_OPEN:/^\(/g,PAR_CLOSE:/^\)/g,BRA_OPEN:/^\{/g,BRA_CLOSE:/^\}/g,SQR_OPEN:/^\[/g,SQR_CLOSE:/^\]/g,COMMA:/^,/g,FOR:/^for(?![a-z0-9])/i,IN:/^in(?![a-z0-9])/i,FUNC:/^[a-z][a-z_]*[0-9]*[ \t\r\n]*\(/i,INST:/^[a-z][a-z_]*[0-9]*/gi,EOF:/^<<EOF>>/},ge=["SPC","COM","EOL"];class me{constructor(e){this._code=e,this._cursor=0,this._token={id:"EOF",val:"",pos:1e100}}get token(){return this._token}get tokenID(){return this.token.id}get tokenCode(){return this._code.slice(this.token.pos)}all(){const e=this._cursor,t=[];for(this._cursor=0;this.hasMoreCode();)this.next(),t.push(structuredClone(this._token));return this._cursor=e,t}highlight(){const e=[];let t=0;for(;t<this._code.length;){const n=this._code.slice(t);let r=null;for(const[e,s]of Object.entries(fe)){s.lastIndex=-1;const o=s.exec(n);if(o){r={id:e,val:o[0],pos:t};break}}if(r){t+=r.val.length;let n=r.val.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");switch(r.id){case"VAR":n=n.toLowerCase();break;case"COM":n=n.slice(0,3).toUpperCase()+n.slice(3);break;case"HEX":case"FUNC":case"FOR":case"IN":n=n.toUpperCase()}e.push(`<span class="Basik-${r.id}">${n}</span>`)}else t+=1,e.push(n.charAt(0))}return e.join("")}hasMoreCode(){return this._cursor<this._code.length-1}fatal(e){var t={pos:this._cursor,code:this._code,msg:e};throw console.error(t,this.token),t}next(){let e=this._code.slice(this._cursor);if(0===e.trimEnd().length)return this._token={id:"EOF",pos:this._cursor,val:""},void(this._cursor+=e.length+1);for(;;){let t=null;for(const n of Object.keys(fe)){const r=n,s=fe[r];if(!s)continue;s.lastIndex=0;const o=s.exec(e);if(o){t={id:r,val:o[0],pos:this._cursor};break}}if(t||this.fatal(`Je suis tombé sur un caractère qui n'a rien à faire là : "${e.charAt(0)}".`),this._cursor+=t.val.length,!ge.includes(t.id))return void(this._token=t);e=this._code.slice(this._cursor)}}is(...e){return e.includes(this._token.id)}get(...e){if(!e.includes(this._token.id))return null;const t=structuredClone(this._token);return this.next(),t}expect(e,t){(Array.isArray(e)?e:[e]).includes(this._token.id)||this.fatal(t);const n=structuredClone(this._token);return this.next(),n}}function ve(e){return(0,X.Xj)(e,{pos:"number",code:"string",msg:"string"})}function ye(e,t){const n=[e,`Erreur à partir de : |${t.code.slice(t.pos,t.pos+32)}...|`,t.msg,""];console.log(`%c${t.msg}`,"background: #f00;color: #fff");const r=[];let s=0,o=0,i=1;const a=`${t.code}\n\n`;for(;o<a.length;)if("\n"===a.charAt(o++)){const e=a.slice(s,o).trimEnd();if(r.push([i++,e]),o>t.pos){for(const[e,t]of r.slice(-5))n.push(`${`${e}`.padStart(6," ")}:  ${t}`),console.log(`%c${`${e}`.padStart(6," ")}:  ${t}`,"font-family:monospace");throw console.log(`%c${" ".repeat(9+t.pos-s)}^`,"font-family:monospace"),n.push(`${" ".repeat(9+t.pos-s)}^`),new Error(n.join("\n"))}s=o}throw new Error(n.join("\n"))}const be={"=":(e,t)=>JSON.stringify(e)===JSON.stringify(t)?1:0,"+":(e,t)=>(0,X.Et)(e)&&(0,X.Et)(t)?e+t:Array.isArray(e)?Array.isArray(t)?[...e,...t]:[...e,t]:Array.isArray(t)?Array.isArray(e)?[...e,...t]:[e,...t]:`${e}${t}`,"-":xe("-",((e,t)=>e-t)),"/":xe("/",((e,t)=>e/t)),"^":xe("^",((e,t)=>Math.pow(e,t))),"%":xe("^",((e,t)=>e%t)),AND:xe("^",((e,t)=>e&t)),OR:xe("^",((e,t)=>e|t)),XOR:xe("^",((e,t)=>e^t)),"*":(e,t)=>{if((0,X.Et)(e)&&(0,X.Et)(t))return e*t;if(Array.isArray(e)||Array.isArray(t))throw new Error("Il est impossible de multiplier des listes !");if((0,X.Kg)(e)&&(0,X.Kg)(t))throw new Error("Il est impossible de multiplier deux chaînes de caractères !");let n=(0,X.Kg)(e)?e:t,r=(0,X.Kg)(t)?e:t;if(0===r)return"";r<0&&(r=-r,n=n.split("").reverse().join(""));const s=Math.floor(r),o=r-s;return`${n.repeat(s)}${n.slice(0,Math.round(o*n.length))}`}};function xe(e,t){return(n,r)=>{if(!(0,X.Et)(n)||!(0,X.Et)(r))throw new Error(`L'opérateur "${e}" ne fonctionne qu'avec des nombres.`);return t(n,r)}}class Ae{constructor(){this.counter=0,this.labels=new Map,this.links=[]}reset(){this.labels.clear(),this.links.splice(0,this.links.length),this.counter=0}create(e=""){return`:${this.counter++}:${e}`}stick(e,t){this.labels.set(e,t)}link(e,t){this.links.push({cursor:e,label:t})}apply(e){for(const{cursor:t,label:n}of this.links){const r=this.labels.get(n);if(void 0===r)throw Error(`Label not found: ${n}`);e[t].val=r}}getLabelAtCursor(e){for(const[t,n]of this.labels.entries())if(n===e)return t;return""}getLinkAtCursor(e){for(const{label:t,cursor:n}of this.links)if(n===e)return t;return null}getLabelsMaxLength(){let e=0;for(const t of this.labels.keys())e=Math.max(e,t.length);return e}}var Ee=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};class we{constructor(e){this.kernel=e,this.labels=new Ae,this.bytecode=[],this.stack=[],this.lexer=new me(""),this.cursor=0,this.code="",this.parseBloc=()=>{if(!this.parseAny(this.parseForIn,this.parseInstruction,this.parseAffectation))return!1;for(;this.parseAny(this.parseForIn,this.parseInstruction,this.parseAffectation););return!0},this.parseForIn=()=>{const{lexer:e}=this;if(!e.get("FOR"))return!1;const t=e.expect("VAR","Il me faut un nom de variable après le mot clef FOR.");this.pushBytecode(t.val),e.expect("IN","Après le nom de variable, il faut le mot clef IN.\nExemple: FOR $i IN $notes"),this.parseExpression()||this.fatal("Je m'attendais à une expression après un FOR ... IN."),this.pushBytecode(0);const n=this.labelCreate(),r=this.labelCreate();return this.labelLink(r),this.labelStick(n),e.expect("BRA_OPEN",["Il faut une accolade ouvrante pour définir un bloc, comme dans cet exemple :","FOR $i IN RANGE(9) {","  PRINTLN($i)","}"].join("\n")),this.pushBytecode(this.$forIn),this.parseBloc(),e.expect("BRA_CLOSE",["Il faut une accolade fermante à la fin d'un bloc, comme dans cet exemple :","FOR $i IN RANGE(9) {","  PRINTLN($i)","}"].join("\n")),this.pushJmp(n),this.labelStick(r),!0},this.parseAffectation=()=>{const e=this.lexer.get("VAR");if(!e)return!1;const t=e.val;return this.pushBytecode(t),this.lexer.expect("EQUAL",`Je m'attendais à voir le signe "=" pour l'affectation de la variable ${t} !`),this.parseExpression(),this.pushBytecode(this.$setVar),!0},this.parseInstruction=()=>{const{lexer:e}=this,t=e.get("FUNC");if(!t)return!1;const n=t.val.slice(0,-1).trim().toUpperCase();let r=0;for(;this.parseExpression()&&(r++,e.get("COMMA")););return e.expect("PAR_CLOSE",`Il manque une parenthèse fermante après les arguments de l'instruction "${n}".`),this.pushBytecode(r,this.$makeArray,n,this.$instruction),!0},this.parseExpression=()=>{if(this.parseAny(this.parseNumber,this.parseVar,this.parseHexa,this.parseString,this.parseExpressionBlock,this.parseFunction)){for(;this.parseBinaryOperator(););return!0}return!1},this.parseFunction=()=>{const{lexer:e}=this,t=e.get("FUNC");if(!t)return!1;const n=t.val.slice(0,-1).trim().toUpperCase();let r=0;for(;this.parseExpression()&&(r++,e.get("COMMA")););return e.expect("PAR_CLOSE",`Il manque une parenthèse fermante après les arguments de la fonction "${n}".`),this.pushBytecode(r,this.$makeArray,n,this.$function),!0},this.parseExpressionBlock=()=>{const{lexer:e}=this;return!!e.get("PAR_OPEN")&&(this.parseExpression()||e.fatal("Il manque une expression après la parenthèse ouvrante."),e.expect("PAR_CLOSE","Il manque une parenthèse fermante ici."),!0)},this.parseBinaryOperator=()=>{const{lexer:e}=this,t=e.get("BINOP");if(!t)return!1;const n=t.val;return this.parseExpression()||e.fatal(`Je m'attendais à une expression après l'opérateur "${e.token.val}" !`),this.pushBytecode(this.makeBinOp(n)),!0},this.parseNumber=()=>{const e=this.lexer.get("NUM");return!!e&&(this.pushBytecode(Number(e.val)),!0)},this.parseString=()=>{const e=this.lexer.get("STR");return!!e&&(this.pushBytecode(e.val.slice(1,-1)),!0)},this.parseHexa=()=>{const e=this.lexer.get("HEX");return!!e&&(this.pushBytecode(Number(`0x${e.val.trim().slice(1)}`)),!0)},this.parseVar=()=>{const e=this.lexer.get("VAR");return!!e&&(this.pushBytecode(e.val,this.$getVar),!0)},this.$jmp=Ce("JMP",(()=>{this.cursor=this.popNum()})),this.$setVar=Ce("setVar(name, value)",(()=>{const e=this.pop(),t=this.popStr();this.kernel.setVar(t,e)})),this.$getVar=Ce("getVar(name)",(()=>{var e;const t=this.popStr();this.stack.push(null!==(e=this.kernel.getVar(t))&&void 0!==e?e:0)})),this.$makeArray=Ce("makeArray(count, ...)",(()=>{const e=this.popNum(),t=this.stack.splice(this.stack.length-e,e);this.stack.push(t)})),this.$function=()=>Ee(this,void 0,void 0,(function*(){const e=this.popStr(),t=this.popArr(),n=yield this.kernel.executeFunction(e,t);this.stack.push(n)})),this.$instruction=()=>Ee(this,void 0,void 0,(function*(){const e=this.popStr(),t=this.popArr();yield this.kernel.executeInstruction(e,t)})),this.$forIn=Ce("FOR ... IN",(()=>{const[e,t,n,r]=this.stack.slice(-4),s=(0,X.Kg)(t)?t.split(""):t;if(!Array.isArray(s))throw new Error(["Après le IN, il me faut une liste ou une chaine.",`Mais j'ai reçu ça : ${JSON.stringify(s)}.`].join("\n"));if(!(0,X.Kg)(e))throw new Error("Internal error! VarName must be a number.");if(!(0,X.Et)(n))throw new Error("Internal error! Index must be a number.");if(!(0,X.Et)(r))throw new Error("Internal error! JumpOut must be a number.");if(n>=s.length)return this.stack.splice(-4,4),void(this.cursor=r);this.kernel.setVar(e,s[n]),this.stack[this.stack.length-2]=n+1}))}execute(e){return Ee(this,void 0,void 0,(function*(){try{this.code=e,console.log(e),this.compile(),this.link()}catch(e){console.error(e),console.log("Byte code:",this.bytecode),ye("Erreur de compilation !",ve(e)?e:{code:this.code,pos:this.bytecode[this.cursor].pos,msg:`${e}`})}try{this.stack.splice(0,this.stack.length);const{bytecode:e,stack:t}=this;for(this.cursor=0;this.cursor<e.length&&Ie.state.running.value;){const n=e[this.cursor++].val;"function"==typeof n?yield n():t.push(n)}this.kernel.debugVariables()}catch(e){console.error(e),console.log("Cursor:",this.cursor),console.log("Byte code:",this.bytecode),console.log("Stack:",this.stack),ye("Erreur d'execution !",ve(e)?e:{code:this.code,pos:this.bytecode[this.cursor].pos,msg:`${e}`})}finally{this.kernel.paint()}}))}compile(){this.labels.reset(),this.bytecode.splice(0,this.bytecode.length);const e=new me(this.code);for(console.log("Tokens:",e.all()),e.next(),this.lexer=e;e.hasMoreCode();)this.parseBloc()||e.fatal("Caractère inattendu ! Je suis perdu...");this.pushBytecode("<<EOF>>"),console.log("Compiled!",this.bytecode)}link(){this.labels.apply(this.bytecode),this.debugBytecode()}fatal(e){const t=this.bytecode[this.cursor];throw t&&console.error(e,t),new Error(e)}pushBytecode(...e){for(const t of e)this.bytecode.push({pos:this.lexer.token.pos,val:t})}pushJmp(e){this.labelLink(e),this.pushBytecode(this.$jmp)}labelLink(e){this.pushBytecode(0),this.labels.link(this.bytecode.length-1,e)}labelStick(e){return this.labels.stick(e,this.bytecode.length)}labelCreate(e=""){return this.labels.create(e)}parseAny(...e){for(const t of e)if(t())return!0;return!1}pop(){const e=this.stack.pop();return null!=e?e:0}popStr(){const e=this.stack.pop();return(0,X.Kg)(e)?e:JSON.stringify(e)}popNum(){const e=this.stack.pop();return(0,X.Et)(e)?e:0}popArr(){const e=this.stack.pop();return Array.isArray(e)?e:(console.error("We were expecting an array, but got:",e),[])}makeBinOp(e){return Ce(e,(()=>{const t=this.pop(),n=this.pop(),r=be[e.toUpperCase()];r||this.lexer.fatal(`Unimplemented binary operator: "${e}"!`);const s=r(n,t);this.stack.push(s)}))}debugBytecode(){const e=this.labels.getLabelsMaxLength(),t=this.bytecode.map((({val:e},t)=>{if((0,X.Tn)(e))return`CALL ${e.name}`;const n=this.labels.getLinkAtCursor(t);return n?`LINK ${n}  ->  ${JSON.stringify(e)}`:`PUSH ${JSON.stringify(e)}`})).map(((t,n)=>`${`${n}`.padStart(6," ")}. ${this.labels.getLabelAtCursor(n).padEnd(e)} ${t}`));console.info(t.join("\n"))}}function Ce(e,t){return{[e]:()=>new Promise(((e,n)=>{try{t()}catch(e){n(e)}e()}))}[e]}const Ie=new class{constructor(){this.state=pe,this.canvas=null,this.kernel=null,pe.running.value=!1}setCanvas(e){var t;e!==this.canvas&&(null===(t=this.kernel)||void 0===t||t.delete(),this.canvas=e,e&&(this.kernel=new ue(e,he.m.symbols)))}run(){return e=this,t=void 0,r=function*(){const{kernel:e}=this;if(e)try{Ie.state.error.value=null,Ie.state.running.value=!0;const t=new we(e);yield t.execute(this.state.code.value)}catch(e){console.error(e);const t=(0,X.Kg)(e)?e:e instanceof Error?e.message:JSON.stringify(e);Ie.state.error.value=t}finally{Ie.state.running.value=!1}},new((n=void 0)||(n=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}));var e,t,n,r}},Se=s.Sxu.classNames;function Fe(e){const t=Ie.state.ready.useValue(),n=Ie.state.running.useValue();return(0,s.CbV)("f2",(()=>{Ie.state.running.value||Ie.run()})),console.log("🚀 [Menu] running =",n),(0,r.jsxs)(s.sWC,{className:Se.join(O.menu),color:"primary-5",padding:"S",display:"flex",justifyContent:"space-between",children:[!n&&(0,r.jsxs)(s.yQN,{enabled:t,onClick:()=>{Ie.run()},children:[(0,r.jsx)(s.AYg,{})," Run (F2)"]}),n&&(0,r.jsxs)(s.yQN,{enabled:t,onClick:()=>{Ie.state.running.value=!1},children:[(0,r.jsx)(s._Zj,{})," Stop"]})]})}var Te=n(6069),_e=n.n(Te),Re=n(1057),ke={};ke.styleTagTransform=m(),ke.setAttributes=d(),ke.insert=u().bind(null,"head"),ke.domAPI=l(),ke.insertStyleElement=f(),i()(Re.A,ke);const Ne=Re.A&&Re.A.locals?Re.A.locals:void 0,Ue=s.Sxu.classNames;function Pe(e){const[t,n]=Ie.state.code.useState();return(0,r.jsx)("div",{className:Ue.join(Ne.editor),children:(0,r.jsx)(_e(),{value:t,onValueChange:n,padding:10,style:{fontFamily:'"Fira code", "Fira Mono", monospace'},highlight:Oe})})}function Oe(e){return new me(e).highlight()}const Le=s.Sxu.classNames;function $e(e){return(0,r.jsxs)(s.UkC,{template:"*1",orientation:"column",className:Le.join(N.panelEditor),children:[(0,r.jsx)(Fe,{}),(0,r.jsx)(Pe,{})]})}var je=n(1039),Me={};Me.styleTagTransform=m(),Me.setAttributes=d(),Me.insert=u().bind(null,"head"),Me.domAPI=l(),Me.insertStyleElement=f(),i()(je.A,Me);const Ve=je.A&&je.A.locals?je.A.locals:void 0,He=s.Sxu.classNames;function Be(e){return(0,r.jsx)("div",{className:He.join(Ve.panelMonitor),children:(0,r.jsx)("canvas",{ref:e=>{Ie.setCanvas(e),Ie.state.ready.value=!0},width:"64",height:"48"})})}var Xe=n(6540),De=n(23),Je=function(e,t,n,r){return new(n||(n=Promise))((function(s,o){function i(e){try{l(r.next(e))}catch(e){o(e)}}function a(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,a)}l((r=r.apply(e,t||[])).next())}))};De.xI.use({renderer:{link:e=>{const{href:t,text:n}=e;return t.startsWith("https:")||t.startsWith("http:")?`<a href=${JSON.stringify(e.href)}>${n}</a>`:`<a href="#/workbench/${t}" data-href=${JSON.stringify(t)}>${n}</a>`}}});const Ge="index";function Ze(...e){return e.filter((e=>e.trim().length>0)).join("/")}var Ke=n(6717),We={};We.styleTagTransform=m(),We.setAttributes=d(),We.insert=u().bind(null,"head"),We.domAPI=l(),We.insertStyleElement=f(),i()(Ke.A,We);const ze=Ke.A&&Ke.A.locals?Ke.A.locals:void 0;var Ye=n(3453),qe={};qe.styleTagTransform=m(),qe.setAttributes=d(),qe.insert=u().bind(null,"head"),qe.domAPI=l(),qe.insertStyleElement=f(),i()(Ye.A,qe),Ye.A&&Ye.A.locals&&Ye.A.locals;const Qe=s.Sxu.classNames;function et(){const[e,t]=Ie.state.error.useState();(0,s.CbV)("escape",(()=>t(null)));const n=function(){const[e,t]=Xe.useState(null),[n,r]=Ie.state.manualPageId.useState();return Xe.useEffect((()=>{e&&(0,L.jWq)(`assets/help/${n}.md`).then((t=>{t?function(e,t,n,r){Je(this,void 0,void 0,(function*(){const s=e.split("/");s.pop();const o=s.join("/"),i=yield De.xI.parse(n,{async:!0,gfm:!0});t.innerHTML=i,function(e,t){const n=e.querySelectorAll("img");for(const e of n){const n=e.getAttribute("src");n&&e.setAttribute("src",Ze("assets/help",t,n))}}(t,o),function(e,t,n){const r=e.querySelectorAll("a[data-href]");for(const e of r){const r=e.getAttribute("data-href");r&&e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),n(Ze(t,r))}))}}(t,o,r),function(e){var t;const n=e.querySelectorAll("pre");for(const e of n){const n=null!==(t=e.textContent)&&void 0!==t?t:"",r=new me(n);e.setAttribute("title","Double clique pour utiliser ce code"),e.innerHTML=r.highlight(),e.addEventListener("dblclick",(()=>Ie.state.code.value=n))}}(t),t.scrollTop=0}))}(n,e,t,r):n!==Ge&&r(Ge)})).catch((()=>r(Ge)))}),[e,n,r]),e=>t(e)}();return console.log("🚀 [PanelManual] error =",e),e?(0,r.jsx)(s.sWC,{fullsize:!0,position:"absolute",padding:"M",overflow:"auto",color:"error",className:ze.error,children:(0,r.jsxs)("div",{onClick:()=>t(null),children:[(0,r.jsx)("h1",{children:"Erreur !"}),(0,r.jsx)("pre",{children:e})]})}):(0,r.jsxs)(s.UkC,{template:"*1",orientation:"row",color:"neutral-5",fullsize:!0,position:"absolute",children:[(0,r.jsx)(s.sWC,{color:"primary-5",display:"flex",justifyContent:"flex-start",alignItems:"center",flexDirection:"column",padding:"XS",children:(0,r.jsx)(s.qxP,{icon:s.LNh,color:"secondary-5",onClick:()=>Ie.state.manualPageId.value="index"})}),(0,r.jsx)(s.sWC,{className:Qe.join(ze.panelManual),color:"neutral-5",padding:"M",overflow:"auto",children:(0,r.jsx)("div",{ref:n,children:"Chargement en cours..."})})]})}const tt=s.Sxu.classNames;function nt(e){return(0,r.jsxs)(C,{className:tt.join(b.workBench),children:[(0,r.jsxs)(_,{children:[(0,r.jsx)(Be,{}),(0,r.jsx)(et,{})]}),(0,r.jsx)($e,{})]})}function rt(){return(0,r.jsx)(nt,{})}},9384:(e,t,n)=>{n.d(t,{A:()=>a});var r=n(1601),s=n.n(r),o=n(6314),i=n.n(o)()(s());i.push([e.id,".HCA0RQdvl_1OXyrfGC6i {\n  --custom-ratio1: 1fr;\n  --custom-ratio2: 1fr;\n  display: grid;\n  grid-template-columns: var(--custom-ratio1) var(--custom-ratio2);\n  width: 100%;\n  height: 100%;\n}\n\n.HCA0RQdvl_1OXyrfGC6i > div.MqKoJwA74gB3Pu_7onn7 {\n  position: relative;\n  min-width: 0;\n}\n",""]),i.locals={splitHorizontal:"HCA0RQdvl_1OXyrfGC6i",container:"MqKoJwA74gB3Pu_7onn7"};const a=i}}]);