"use strict";(self.webpackChunkvintage_machine=self.webpackChunkvintage_machine||[]).push([[564],{1438:(e,t,n)=>{n.r(t),n.d(t,{default:()=>k});var r=n(4848),o=n(5968);function a(e){return Array.isArray(e)}function s(e){return!Array.isArray(e)}const i=["expression",[["functions",[["RANGE",[{name:"RANGE(3)",code:["$a=RANGE(3)"],vars:{$a:[0,1,2]}},{name:"RANGE(3,6)",code:["$a=RANGE(3,6)"],vars:{$a:[3,4,5,6]}},{name:"RANGE(6,3)",code:["$a=RANGE(6,3)"],vars:{$a:[6,5,4,3]}},{name:"RANGE(0,360,90)",code:["$a=RANGE(0,360,90)"],vars:{$a:[0,90,180,270,360]}},{name:"RANGE(0,10,4)",code:["$a=RANGE(0,10,4)"],vars:{$a:[0,4,8]}},{name:"RANGE(0,10,-4)",code:["$a=RANGE(0,10,-4)"],vars:{$a:[0,4,8]}},{name:"RANGE(+1,-1,0.5)",code:["$a=RANGE(+1,-1,0.5)"],vars:{$a:[1,.5,0,-.5,-1]}}]]]],["atomic",[["number",[{name:"positive integer",code:["$a = 666"],vars:{$a:666}},{name:"positive integer (with +)",code:["$a = +666"],vars:{$a:666}},{name:"negative integer",code:["$a = -666"],vars:{$a:-666}},{name:"positive float",code:["$a = 27.11"],vars:{$a:27.11}},{name:"positive float (with +)",code:["$a = +27.11"],vars:{$a:27.11}},{name:"negative float",code:["$a = -27.11"],vars:{$a:-27.11}},{name:"positive hexa",code:["$a = #ff"],vars:{$a:255}},{name:"negative hexa",code:["$a = -#ff"],vars:{$a:-255}}]],["string",[{name:"empty",code:['$a = ""'],vars:{$a:""}},{name:"hello world",code:['$a = "Hello world!"'],vars:{$a:"Hello world!"}},{name:"multi-line",code:['$a = "hello','world"'],vars:{$a:"hello\nworld"}}]],["list",[{name:"empty",code:["$a = []"],vars:{$a:[]}},{name:"empty with spaces",code:["$a = [\n \t\n\r\r  ]"],vars:{$a:[]}},{name:"inline",code:["$a = [1,2,3]"],vars:{$a:[1,2,3]}},{name:"inline with spaces",code:["$a = [1,  2,3   ]"],vars:{$a:[1,2,3]}}]]]],["binary operator",[["with number",[{name:"addition",code:["$a = 7+3"],vars:{$a:10}},{name:"substraction",code:["$a = 7-3"],vars:{$a:4}},{name:"substraction with hexa",code:["$a = 7-#3"],vars:{$a:4}},{name:"multiplication",code:["$a = 7*3"],vars:{$a:21}},{name:"division",code:["$a = 26/2"],vars:{$a:13}}]]]]]];var c=n(5072),l=n.n(c),u=n(7825),d=n.n(u),f=n(7659),$=n.n(f),h=n(5056),p=n.n(h),m=n(540),g=n.n(m),v=n(1113),y=n.n(v),w=n(4817),b={};b.styleTagTransform=y(),b.setAttributes=p(),b.insert=$().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=g(),l()(w.A,b);const x=w.A&&w.A.locals?w.A.locals:void 0;var E=n(6540),j=n(6125),A=n(2501),I=function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function s(e){try{c(r.next(e))}catch(e){a(e)}}function i(e){try{c(r.throw(e))}catch(e){a(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,i)}c((r=r.apply(e,t||[])).next())}))};function k(){const e=function(){const e=E.useRef(null);return e.current||(e.current=new Map),e.current}();return function(e){const[,t]=E.useState(-1),n=E.useMemo((()=>{const t=[];return V(i,t,e,"0"),console.log("ðŸš€ [page] actions =",t),t}),[e]);E.useEffect((()=>{(()=>{I(this,void 0,void 0,(function*(){for(let e=0;e<n.length;e++)yield n[e](),t(e)}))})()}),[n,e])}(e),(0,r.jsxs)(o.UkC,{className:x.page,template:"*1",orientation:"column",position:"absolute",fullsize:!0,children:[(0,r.jsx)(o.sWC,{padding:"M",display:"flex",justifyContent:"flex-start",alignItems:"center",color:"primary-1",children:(0,r.jsx)("b",{children:"Test suite"})}),(0,r.jsx)(o.sWC,{padding:"M",overflow:"auto",color:"neutral-1",children:(0,r.jsx)("ul",{children:(0,r.jsx)(O,{testCase:i,gid:"0",results:e})})})]})}function V(e,t,n,r){const[,o]=e,i=o.filter(a),c=o.filter(s);let l=0;for(const e of c){const o=`${r}/${l++}`;t.push((()=>I(this,void 0,void 0,(function*(){const t={item:e,pass:!1,vars:{}},r=globalThis.document.createElement("canvas"),a=new j.M(r,new Image);try{const n=(0,A.R)(a);yield n.execute(e.code.join("\n"));for(const e of a.allVarNames)t.vars[`$${e.toLowerCase()}`]=a.getVar(e)}catch(e){const n=e instanceof Error?e.message:JSON.stringify(e,null,"  ");t.vars["@ERROR"]=n}n.set(o,t),t.pass=!0;for(const n of Object.keys(e.vars)){const r=e.vars[n],o=t.vars[n],a=typeof r,s=typeof o;if(a!==s){t.vars["@ERROR"]=`${n} was expected to be of type ${a}, but we got ${s}!`,t.pass=!1;break}if(JSON.stringify(r)!==JSON.stringify(o)){t.vars["@ERROR"]=`${n} was expected to be ${r}, but we got ${o}!`,t.pass=!1;break}}a.delete(),console.log(t)}))))}l=0;for(const e of i){const o=`${r}/${l++}`;V(e,t,n,o)}}function O({testCase:e,gid:t,results:n}){const[o,i]=e,c=i.filter(a),l=i.filter(s);return(0,r.jsxs)("li",{children:[(0,r.jsx)("div",{children:o}),(0,r.jsx)("ul",{children:l.map(((e,o)=>(0,r.jsx)(G,{testItem:e,gid:`${t}/${o}`,results:n},`${e}#${o}/I`)))}),(0,r.jsx)("ul",{children:c.map(((e,o)=>{const[a]=e;return(0,r.jsx)(O,{testCase:e,gid:`${t}/${o}`,results:n},`${a}#${o}/C`)}))})]})}function G({testItem:e,gid:t,results:n}){const o=n.get(t),a=o?o.pass?x.pass:x.fail:x.wait;if(o)return(0,r.jsx)("li",{children:(0,r.jsxs)("details",{children:[(0,r.jsx)("summary",{className:a,children:e.name}),(0,r.jsxs)("div",{children:[(0,r.jsx)("pre",{children:e.code.join("\n")}),(0,r.jsxs)("div",{children:["Expected:",(0,r.jsx)("ul",{children:Object.keys(e.vars).map((t=>(0,r.jsxs)("li",{children:[t,": ",(0,r.jsx)("code",{children:JSON.stringify(e.vars[t])})]},t)))})]}),(0,r.jsxs)("div",{children:["Got:",(0,r.jsx)("ul",{children:Object.keys(o.vars).map((e=>(0,r.jsxs)("li",{children:[e,": ",(0,r.jsx)("code",{children:JSON.stringify(o.vars[e])})]},e)))})]})]})]})})}},2197:(e,t,n)=>{function r(e){return!!e&&!Array.isArray(e)&&"object"==typeof e}function o(e){return"string"==typeof e}function a(e){return"number"==typeof e}function s(e){return"function"==typeof e}function i(e){return"boolean"==typeof e}function c(e,t,n=null){try{return l(e,t),!0}catch(t){return n&&(console.error("[Invalid type]",n),console.error(e),console.debug(t)),!1}}function l(e,t,n="data"){if("function"==typeof t)return l(e,t(),n);if("unknown"===t)return;if("null"===t){if(null!==e)throw console.log("ðŸš€ [index] data = ",e,typeof e),Error(`Expected ${n} to be a null and not a ${f(e)}!`);return}if("string"==typeof t){if(typeof e!==t)throw Error(`Expected ${n} to be a ${t} and not a ${f(e)}!`);return}if(Array.isArray(t)){const[o]=t;switch(o){case"array":return void function(e,t,n){if(!Array.isArray(e))throw Error(`Expected ${t} to be an array and not a ${f(e)}!`);const[,r,o]=n;if(o){const n=e.length;if(a(o)){if(n!==o)throw Error(`Expected ${t}'s length to be ${o} and not ${n}!`)}else{const{min:e,max:r}=o;if(a(e)&&n<e)throw Error(`Expected ${t}'s MIN length to be ${e} and not ${n}!`);if(a(r)&&n>r)throw Error(`Expected ${t}'s MAX length to be ${r} and not ${n}!`)}}for(let n=0;n<e.length;n+=1)l(e[n],r,`${t}[${n}]`)}(e,n,t);case"map":return void function(e,t,n){if(!r(e))throw Error(`Expected ${t} to be an object and not a ${f(e)}!`);const[,o]=n;for(const n of Object.keys(e))"string"==typeof n&&l(e[n],o,`${t}[${n}]`)}(e,n,t);case"?":return void function(e,t,n){if(void 0===e)return;const[,r]=n;l(e,r,t)}(e,n,t);case"|":return void function(e,t,n){const[,...r]=n;if(0===r.length)throw Error(`No type has been defined for this alternative: ${JSON.stringify(n)}!`);const o=[];for(const n of r)try{return void l(e,n,t)}catch(e){e instanceof Error&&o.push(e)}throw new Error(`All alternatives failed!${o.map((e=>`\n${e.message}`))}`)}(e,n,t);case"tuple":return void u(e,n,t);case"tuple...":return void function(e,t,[,...n]){const r=n.length-1;u(e,t,["tuple",...n.slice(0,r)]);const o=n[r];for(let n=r;n<e.length;n++)l(e[n],o,`${t}[${n}]`)}(e,n,t);case"partial":return void function(e,t,[,n]){!function(e,t="data"){if(!r(e))throw Error(`${t} was expected to be an object but we got ${typeof e}!`)}(e,t);for(const r of Object.keys(n)){if("string"!=typeof r)continue;const o=e[r];void 0!==o&&l(o,n[r],`${t}.${r}`)}}(e,n,t);case"literal":return void function(e,t,n){const[,...r]=n;for(const t of r)if(e===t)return;throw Error(`Expected ${t} to be a literal (${r.map((e=>`"${e}"`)).join(" | ")}) and not a ${f(e)}!`)}(e,n,t);case"custom":return void function(e,t,[,n]){if(!n(e))throw Error(`Expected ${n.name}(${t}) to return true!`)}(e,n,t);default:throw Error(`Don't know how to create a type guard for this kind of type: ${JSON.stringify(t)}`)}}if("object"!=typeof e)throw Error(`Expected ${n} to be an object and not a ${f(e)}!`);const o=e;for(const e of Object.keys(t))"string"==typeof e&&l(o[e],t[e],`${n}.${e}`)}function u(e,t,[,...n]){if(function(e,t="data"){if(!Array.isArray(e))throw Error(`${t} was expected to be an Array but we got ${typeof e}!`)}(e),n.length>e.length)throw Error(`Expected ${t}'s length to be at least ${n.length} and not ${e.length}!`);for(let r=0;r<n.length;r++){const o=n[r];l(e[r],o,`${t}[${r}]`)}}function d(e,t){return function(e,t,n){return c(e,t)?e:c(n,t)?n:n(e)}(e,"number",t)}function f(e){var t;return null===e?"null":"function"==typeof e?`function ${null!==(t=e.name)&&void 0!==t?t:""}()`:typeof e}n.d(t,{Et:()=>a,GB:()=>d,Kg:()=>o,Lm:()=>i,Tn:()=>s,Xj:()=>c,j:()=>l})},4817:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(1601),o=n.n(r),a=n(6314),s=n.n(a)()(o());s.push([e.id,'.C2IVcFnrnogJkGVeI9Ow {\n  font-size: 16px;\n}\n\n.C2IVcFnrnogJkGVeI9Ow ul {\n  padding-left: 0;\n}\n\n.C2IVcFnrnogJkGVeI9Ow ul ul {\n  padding-left: 1em;\n}\n\n.C2IVcFnrnogJkGVeI9Ow ul > li {\n  margin: 1px 0;\n}\n\n.C2IVcFnrnogJkGVeI9Ow ul > li::marker {\n  content: "";\n}\n\n.C2IVcFnrnogJkGVeI9Ow summary {\n  cursor: pointer;\n  transition: 0.2s;\n  padding: 0 0.5em;\n  border-radius: 100vmax;\n}\n\n.C2IVcFnrnogJkGVeI9Ow summary:hover {\n  background-color: var(--theme-color-neutral-6);\n  color: var(--theme-color-on-neutral-6);\n}\n\n.C2IVcFnrnogJkGVeI9Ow details > div {\n  border-left: 1px solid currentColor;\n  padding-left: 0.5em;\n  margin-bottom: 1em;\n  margin-left: 0.5em;\n}\n\n.C2IVcFnrnogJkGVeI9Ow details > div pre {\n  padding: 0.5em;\n  white-space: pre-wrap;\n}\n\n.C2IVcFnrnogJkGVeI9Ow summary.gKD9PC20iL9GBFFiojMK {\n  background-color: #8f8;\n  font-weight: bold;\n}\n\n.C2IVcFnrnogJkGVeI9Ow summary.NShF6ek9OtcwbFJrr6uF {\n  background-color: #f88;\n  font-weight: bolder;\n}\n',""]),s.locals={page:"C2IVcFnrnogJkGVeI9Ow",pass:"gKD9PC20iL9GBFFiojMK",fail:"NShF6ek9OtcwbFJrr6uF"};const i=s},8347:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(6540);class o{constructor(e,t={}){var n;this.options=t,this.listeners=new Set,this.currentValue=t.transform?t.transform(e):e,this.id=`AtomicState\n${null===(n=t.storage)||void 0===n?void 0:n.id}`,t.storage&&this.loadFromStorage()}get value(){return this.currentValue}set value(e){const{transform:t,storage:n}=this.options;if(t&&(e=t(e)),e!==this.currentValue){this.currentValue=e,n&&window.localStorage.setItem(this.id,JSON.stringify(e));for(const t of this.listeners)t(e)}}useListener(e){r.useEffect((()=>(this.listeners.add(e),()=>{this.listeners.delete(e)})),[])}useValue(){const[e,t]=r.useState(this.currentValue);return r.useEffect((()=>(this.listeners.add(t),()=>{this.listeners.delete(t)})),[]),e}useState(){const[e,t]=r.useState(this.currentValue);return r.useEffect((()=>(this.listeners.add(t),()=>{this.listeners.delete(t)})),[]),[e,e=>{this.value=e}]}loadFromStorage(){const{storage:e}=this.options;if(e)try{const t=window.localStorage.getItem(this.id);if(!t)return;const n=JSON.parse(t);if(!e.guard(n))throw Error("Invalid type!");this.currentValue=n}catch(t){console.error(`Unable to retrieve AtomicState "${e.id}":`,t)}}}}}]);